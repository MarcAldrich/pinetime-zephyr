

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Install zephyr &mdash; open source watch 1.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="next" title="Starting with some basic applications" href="basicapplications.html" />
    <link rel="prev" title="Zephyr smartwatch framework" href="content.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="index.html" class="icon icon-home"> open source watch
          

          
          </a>

          
            
            
              <div class="version">
                beta
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="copyright.html">Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="content.html">Zephyr  smartwatch framework</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Install zephyr</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#update-on-31-12-2020">update on 31-12-2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="#in-case-you-already-have-zephyr-installed">In case you already have zephyr installed:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#in-case-you-start-from-scratch">In case you start from scratch :</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="basicapplications.html">Starting with some basic applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="bluetooth.html">bluetooth (BLE) example</a></li>
<li class="toctree-l1"><a class="reference internal" href="display.html">display (st7789)</a></li>
<li class="toctree-l1"><a class="reference internal" href="gfx.html">GFX Library Sample</a></li>
<li class="toctree-l1"><a class="reference internal" href="lvgl.html">LittlevGL Basic Sample</a></li>
<li class="toctree-l1"><a class="reference internal" href="clock.html">LittlevGL Clock Sample</a></li>
<li class="toctree-l1"><a class="reference internal" href="RTC.html">Real Time Clock</a></li>
<li class="toctree-l1"><a class="reference internal" href="current-time.html">Current Time Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="drivers/drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="fota/fota.html">Firmware Over The Air (FOTA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="menuconfig.html">Menuconfig</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/hacking.html">Hacking stuff</a></li>
<li class="toctree-l1"><a class="reference internal" href="behind/behind.html">Behind the scene</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">open source watch</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Install zephyr</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/installation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="install-zephyr">
<h1>Install zephyr<a class="headerlink" href="#install-zephyr" title="Permalink to this headline">¶</a></h1>
<div class="section" id="update-on-31-12-2020">
<h2>update on 31-12-2020<a class="headerlink" href="#update-on-31-12-2020" title="Permalink to this headline">¶</a></h2>
<p>Pinetime has become part of the standard zephyr distribution!
This manual was initially created with Pinetime as an external application.
As from today you can install zephyr and execute a pinetime sample!</p>
<p>In addition the /app directory can be copied under same directory as the /zephyr directory.
It contains extra board definitions and updated basic samples, and(!) the opensource smartwatch framework.</p>
<p>However the drivers for the Heartrate sensor, the acceleration sensor and touch screen are not - yet - part of the standard zephyr-distribution.
These drivers are work in progress.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">west</span> <span class="n">build</span> <span class="o">-</span><span class="n">p</span> <span class="o">-</span><span class="n">b</span> <span class="n">pinetime_devkit0</span> <span class="n">samples</span><span class="o">/</span><span class="n">boards</span><span class="o">/</span><span class="n">pine64_pinetime</span>
</pre></div>
</div>
<p>A second and important sample is provided.
Zephyr and the LVGL graphics library play together, using the touchscreen.
The standard Focaltech touchscreen driver has been adapted slightly, as well as the board definition files.
To get the sample up and running copy both the adapted board definition files and touchscreen driver, replacing the standard zephyr ones.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">west</span> <span class="n">build</span> <span class="o">-</span><span class="n">p</span> <span class="o">-</span><span class="n">b</span> <span class="n">pinetime_devkit0</span> <span class="n">samples</span><span class="o">/</span><span class="n">display</span><span class="o">/</span><span class="n">lvgl</span>
</pre></div>
</div>
<p>The focaltech touchscreen driver is more recent/better than the cst816s touchscreendriver.
Still, there is room for improvement (slide events .....)</p>
<p>The battery driver was provided as a module and is not working yet.</p>
<p>The acceleration sensor bma421 driver is working, and work has been done to distill a stepcounter out of it.</p>
<p>The heartrate sensor hrs3300, could work, but is kind of useless without a proper algorithm (open source) to distill a heartbeat out of it.
You can still play around with it's capabilities as a lightsensor / led device.</p>
</div>
<div class="section" id="in-case-you-already-have-zephyr-installed">
<h2>In case you already have zephyr installed:<a class="headerlink" href="#in-case-you-already-have-zephyr-installed" title="Permalink to this headline">¶</a></h2>
<p>Pinetime works as external (out of tree) application.
You can clone pinetime next to zephyr in the working directory and update manifest and west.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">west</span> <span class="n">config</span> <span class="n">manifest</span><span class="o">.</span><span class="n">path</span> <span class="n">pinetime</span>
</pre></div>
</div>
</div>
<div class="section" id="in-case-you-start-from-scratch">
<h2>In case you start from scratch :<a class="headerlink" href="#in-case-you-start-from-scratch" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://docs.zephyrproject.org/latest/getting_started/index.html">https://docs.zephyrproject.org/latest/getting_started/index.html</a></p>
<p>the documentation describes an installation process under Ubuntu/macOS/Windows</p>
<p>I picked Debian (which is not listed)
.... and soon afterwards ran into trouble</p>
<p><cite>this behaviour is known as : stuborn or stupid, but I remain convinced it could work</cite></p>
<p>In the Zephyr getting started page :</p>
<ol class="arabic simple">
<li><p>select and update OS</p></li>
<li><p>install dependencies</p></li>
<li><p>Get the source code</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">instead</span> <span class="n">of</span> <span class="n">following</span> <span class="n">the</span> <span class="n">procedure</span><span class="p">:</span>
       <span class="n">cd</span> <span class="o">~</span>
       <span class="n">west</span> <span class="n">init</span> <span class="n">zephyrproject</span>
       <span class="n">cd</span> <span class="n">zephyrproject</span>
       <span class="n">west</span> <span class="n">update</span>

<span class="n">you</span> <span class="n">should</span> <span class="n">do</span> <span class="n">this</span> <span class="p">:</span>
        <span class="n">cd</span> <span class="o">~</span>
        <span class="n">mkdir</span> <span class="n">work</span>
        <span class="n">cd</span> <span class="n">work</span>
        <span class="n">west</span> <span class="n">init</span> <span class="o">-</span><span class="n">m</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">najnesnaj</span><span class="o">/</span><span class="n">pinetime</span><span class="o">-</span><span class="n">zephyr</span>
        <span class="n">west</span> <span class="n">update</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>complete the other steps</p></li>
</ol>
<p>to test if your install works :</p>
<p>cd ~/work/pinetime</p>
<p>west build -p -b pinetime samples/basic/blinky</p>
<p><strong>TIP : sometimes you run into trouble compiling: removing the build directory can help in that case</strong></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="basicapplications.html" class="btn btn-neutral float-right" title="Starting with some basic applications" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="content.html" class="btn btn-neutral float-left" title="Zephyr smartwatch framework" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; <a href="copyright.html">Copyright</a> 2020, jj

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>